<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>SSC Vocabulary Flashcards - Enhanced</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 10px;
            touch-action: pan-y;
        }
        
        @media (min-width: 768px) {
            body {
                padding: 20px;
            }
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 20px;
        }

        .header h1 {
            font-size: clamp(1.5rem, 5vw, 2.5rem);
            margin-bottom: 8px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: clamp(0.9rem, 3vw, 1.1rem);
            opacity: 0.9;
        }

        /* Top Navigation Tabs */
        .nav-tabs {
            display: flex;
            gap: 8px;
            margin-bottom: 15px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .nav-tab {
            padding: 10px 16px;
            background: rgba(255,255,255,0.2);
            color: white;
            border: 2px solid rgba(255,255,255,0.3);
            border-radius: 20px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
            backdrop-filter: blur(10px);
            font-size: clamp(0.85rem, 2.5vw, 1rem);
            white-space: nowrap;
            min-height: 42px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .nav-tab:hover, .nav-tab:active {
            background: rgba(255,255,255,0.3);
        }

        .nav-tab.active {
            background: white;
            color: #667eea;
            border-color: white;
        }

        .nav-tab .count {
            background: rgba(231, 76, 60, 0.9);
            color: white;
            padding: 2px 6px;
            border-radius: 10px;
            font-size: 0.85em;
            margin-left: 4px;
        }

        /* Filters */
        .filters {
            background: rgba(255,255,255,0.95);
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        @media (min-width: 768px) {
            .filters {
                padding: 25px;
                margin-bottom: 30px;
            }
        }

        .filter-section {
            margin-bottom: 15px;
        }

        .filter-section:last-child {
            margin-bottom: 0;
        }

        .filter-label {
            font-size: clamp(1rem, 3vw, 1.1rem);
            font-weight: bold;
            color: #667eea;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .filter-options {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }

        .filter-btn {
            padding: 8px 16px;
            border: 2px solid #667eea;
            background: white;
            color: #667eea;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: bold;
            font-size: clamp(0.8rem, 2.5vw, 0.9rem);
            flex: 0 1 auto;
            min-height: 42px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .filter-btn:hover, .filter-btn:active {
            background: #f0f0f0;
        }

        .filter-btn.active {
            background: #667eea;
            color: white;
            box-shadow: 0 4px 10px rgba(102, 126, 234, 0.3);
        }

        .clear-filters {
            padding: 10px 20px;
            background: #f5576c;
            color: white;
            border: none;
            border-radius: 20px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
            font-size: clamp(0.85rem, 2.5vw, 0.9rem);
            min-height: 42px;
        }

        .clear-filters:hover, .clear-filters:active {
            background: #e04558;
            transform: translateY(-2px);
        }

        /* Stats */
        .stats {
            background: rgba(255,255,255,0.2);
            border-radius: 12px;
            padding: 12px 15px;
            margin-bottom: 15px;
            color: white;
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
            gap: 10px;
            backdrop-filter: blur(10px);
        }

        .stat-item {
            text-align: center;
            min-width: 70px;
        }

        .stat-value {
            font-size: clamp(1.5rem, 4vw, 2rem);
            font-weight: bold;
        }

        .stat-label {
            font-size: clamp(0.75rem, 2.5vw, 0.9rem);
            opacity: 0.9;
        }

        /* Card Area */
        .flip-hint {
            text-align: center;
            color: white;
            font-size: clamp(0.9rem, 3vw, 1.1rem);
            opacity: 0.8;
            margin-bottom: 12px;
        }

        .swipe-hint {
            text-align: center;
            color: white;
            font-size: clamp(0.8rem, 2.5vw, 0.95rem);
            opacity: 0.7;
            margin-bottom: 10px;
        }

        .card-area {
            display: flex;
            justify-content: center;
            margin-bottom: 15px;
        }

        .card-container {
            perspective: 1000px;
            width: 100%;
            max-width: 600px;
            touch-action: manipulation;
            cursor: pointer;
        }

        .card {
            width: 100%;
            height: clamp(350px, 60vh, 450px);
            position: relative;
            transform-style: preserve-3d;
            transition: transform 0.6s;
            cursor: pointer;
            touch-action: manipulation;
            user-select: none;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
        }

        @media (max-width: 480px) {
            .card {
                height: clamp(380px, 70vh, 500px);
            }
        }

        .card:active {
            opacity: 0.95;
        }

        .card.flipped {
            transform: rotateY(180deg);
        }

        .card.swiping {
            transition: none;
        }

        .card-face {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        @media (min-width: 768px) {
            .card-face {
                padding: 40px;
                border-radius: 20px;
            }
        }
            text-align: center;
        }

        /* CHANGED: New front card color - blue gradient */
        .card-front {
            background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
        }

        .card-back {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            transform: rotateY(180deg);
            word-wrap: break-word;
            overflow-wrap: break-word;
            overflow-y: auto;
            -webkit-overflow-scrolling: touch;
        }
        
        .card-back::-webkit-scrollbar {
            width: 8px;
        }
        
        .card-back::-webkit-scrollbar-track {
            background: rgba(255,255,255,0.1);
            border-radius: 10px;
        }
        
        .card-back::-webkit-scrollbar-thumb {
            background: rgba(255,255,255,0.4);
            border-radius: 10px;
        }
        
        .card-back::-webkit-scrollbar-thumb:hover {
            background: rgba(255,255,255,0.6);
        }

        .card-badges {
            position: absolute;
            top: 15px;
            left: 15px;
            right: 15px;
            display: flex;
            justify-content: space-between;
            gap: 10px;
            flex-wrap: wrap;
        }

        .badge {
            padding: 5px 10px;
            border-radius: 12px;
            font-size: clamp(0.65rem, 2vw, 0.75rem);
            font-weight: bold;
            text-transform: uppercase;
        }

        @media (min-width: 768px) {
            .badge {
                padding: 5px 12px;
                border-radius: 15px;
            }
        }

        .badge-exam {
            background: #667eea;
            color: white;
        }

        .badge-type {
            background: #43e97b;
            color: #2d3436;
        }

        .badge-status {
            background: #f39c12;
            color: white;
        }

        .badge-status.remembered {
            background: #27ae60;
        }

        .badge-status.not-remembered {
            background: #e74c3c;
        }

        .word {
            font-size: clamp(1.8rem, 6vw, 3rem);
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 15px;
            word-wrap: break-word;
        }

        .hint {
            font-size: clamp(1rem, 3.5vw, 1.2rem);
            color: #34495e;
            font-style: italic;
        }

        .meaning-section {
            width: 100%;
            word-wrap: break-word;
            overflow-wrap: break-word;
            padding: 5px 0;
            max-height: calc(100% - 80px);
            overflow-y: visible;
        }

        .meaning-title {
            font-size: clamp(0.75rem, 2.5vw, 0.9rem);
            font-weight: bold;
            margin-bottom: 8px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        @media (min-width: 768px) {
            .meaning-title {
                letter-spacing: 2px;
                margin-bottom: 12px;
            }
        }

        /* CHANGED: Reduced font size for better fit */
        .meaning {
            font-size: clamp(0.85rem, 2.8vw, 1rem);
            margin-bottom: 10px;
            line-height: 1.4;
            word-wrap: break-word;
            overflow-wrap: break-word;
        }

        @media (min-width: 768px) {
            .meaning {
                margin-bottom: 15px;
            }
        }

        /* CHANGED: Reduced font size for better fit */
        .hindi {
            font-size: clamp(1rem, 3vw, 1.3rem);
            margin-bottom: 10px;
            font-weight: bold;
            padding: 8px;
            background: rgba(255,255,255,0.2);
            border-radius: 10px;
            word-wrap: break-word;
            overflow-wrap: break-word;
        }

        @media (min-width: 768px) {
            .hindi {
                padding: 12px;
                margin-bottom: 15px;
            }
        }

        /* CHANGED: Reduced font size for better fit */
        .synonym {
            font-size: clamp(0.85rem, 2.5vw, 0.95rem);
            margin-top: 10px;
            padding: 8px;
            background: rgba(255,255,255,0.15);
            border-radius: 10px;
            word-wrap: break-word;
            overflow-wrap: break-word;
        }

        @media (min-width: 768px) {
            .synonym {
                margin-top: 15px;
                padding: 12px;
            }
        }

        /* Remember Controls */
        .remember-controls {
            display: flex;
            gap: 15px;
            margin: 15px auto;
            justify-content: center;
            flex-wrap: wrap;
            max-width: 600px;
        }

        @media (min-width: 768px) {
            .remember-controls {
                gap: 20px;
                margin: 20px auto;
            }
        }

        .remember-btn {
            width: clamp(55px, 15vw, 65px);
            height: clamp(55px, 15vw, 65px);
            border: none;
            border-radius: 50%;
            font-size: clamp(1.8rem, 5vw, 2.2rem);
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

        .btn-remember {
            background: #27ae60;
            color: white;
        }

        .btn-remember:hover, .btn-remember:active {
            background: #229954;
            transform: scale(1.1);
        }

        .btn-not-remember {
            background: #e74c3c;
            color: white;
        }

        .btn-not-remember:hover, .btn-not-remember:active {
            background: #c0392b;
            transform: scale(1.1);
        }

        /* Controls */
        .controls {
            display: flex;
            gap: 8px;
            justify-content: center;
            flex-wrap: wrap;
        }

        @media (min-width: 768px) {
            .controls {
                gap: 12px;
            }
        }

        .btn {
            padding: 12px 20px;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-weight: bold;
            background: white;
            color: #667eea;
            transition: all 0.3s;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            font-size: clamp(0.85rem, 2.5vw, 1rem);
            min-height: 44px;
        }

        @media (min-width: 768px) {
            .btn {
                padding: 15px 30px;
                border-radius: 30px;
            }
        }

        .btn:hover, .btn:active {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.3);
        }

        .btn-prev, .btn-next {
            background: #3498db;
            color: white;
        }

        .btn-flip {
            background: #9b59b6;
            color: white;
        }

        .btn-shuffle {
            background: #f39c12;
            color: white;
        }

        .hidden {
            display: none !important;
        }

        .no-results {
            text-align: center;
            color: white;
            font-size: clamp(1.1rem, 4vw, 1.5rem);
            padding: 40px;
            background: rgba(255,255,255,0.2);
            border-radius: 15px;
            backdrop-filter: blur(10px);
            margin: 20px 0;
        }

        /* Quiz History Section Styles */
        .quiz-history-section {
            background: rgba(255,255,255,0.95);
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        .quiz-history-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 3px solid #667eea;
        }

        .quiz-history-header h2 {
            color: #667eea;
            font-size: 1.8em;
        }

        .clear-history-btn {
            padding: 10px 20px;
            background: #e74c3c;
            color: white;
            border: none;
            border-radius: 20px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
        }

        .clear-history-btn:hover {
            background: #c0392b;
        }

        .history-item {
            background: white;
            border: 2px solid #e9ecef;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 15px;
            transition: all 0.3s;
        }

        .history-item:hover {
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.2);
            border-color: #667eea;
        }

        .history-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .history-date {
            font-size: 0.9em;
            color: #7f8c8d;
        }

        .history-score {
            font-size: 1.5em;
            font-weight: bold;
            color: #667eea;
        }

        .history-details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 10px;
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid #e9ecef;
        }

        .history-stat {
            text-align: center;
        }

        .history-stat-value {
            font-size: 1.3em;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .history-stat-label {
            font-size: 0.85em;
            color: #7f8c8d;
        }

        .stat-correct { color: #27ae60; }
        .stat-wrong { color: #e74c3c; }
        .stat-skipped { color: #f39c12; }

        .no-history {
            text-align: center;
            padding: 40px;
            color: #7f8c8d;
            font-size: 1.1em;
        }

        /* Progress Indicator */
        .progress-bar {
            width: 100%;
            height: 8px;
            background: rgba(255,255,255,0.2);
            border-radius: 10px;
            margin-bottom: 20px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #27ae60, #43e97b);
            border-radius: 10px;
            transition: width 0.3s;
        }

        /* Options Display on Card Back */
        .options-display {
            margin-top: 15px;
            text-align: left;
            width: 100%;
        }

        /* CHANGED: Reduced font size for options */
        .option-item {
            background: rgba(255,255,255,0.2);
            padding: 10px 12px;
            margin: 6px 0;
            border-radius: 8px;
            font-size: 0.9em;
            line-height: 1.5;
            word-wrap: break-word;
            overflow-wrap: break-word;
        }
        
        .option-item strong {
            color: white;
            font-weight: 600;
        }
        
        .option-item em {
            color: rgba(255,255,255,0.85);
            font-style: normal;
            font-size: 0.9em;
        }

        /* Quiz Mode Styles */
        .quiz-setup {
            max-width: 800px;
            margin: 0 auto;
        }

        .quiz-header {
            background: rgba(255,255,255,0.95);
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            flex-wrap: wrap;
            gap: 10px;
        }

        @media (min-width: 768px) {
            .quiz-header {
                padding: 20px;
                margin-bottom: 30px;
                border-radius: 15px;
            }
        }

        .quiz-progress, .quiz-score {
            font-size: clamp(1rem, 3vw, 1.2rem);
            font-weight: bold;
            color: #667eea;
        }

        .quiz-card {
            background: white;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            max-width: 700px;
            margin-left: auto;
            margin-right: auto;
        }

        @media (min-width: 768px) {
            .quiz-card {
                padding: 40px;
                margin-bottom: 30px;
                border-radius: 20px;
            }
        }

        .quiz-word {
            font-size: clamp(1.8rem, 6vw, 3rem);
            font-weight: bold;
            color: #667eea;
            margin-bottom: 12px;
            text-align: center;
            word-wrap: break-word;
        }

        @media (min-width: 768px) {
            .quiz-word {
                margin-bottom: 15px;
            }
        }

        .quiz-hint {
            font-size: clamp(0.95rem, 3vw, 1.1rem);
            color: #666;
            font-style: italic;
            text-align: center;
            margin-bottom: 20px;
            word-wrap: break-word;
        }

        @media (min-width: 768px) {
            .quiz-hint {
                margin-bottom: 30px;
            }
        }

        .quiz-options {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        @media (min-width: 768px) {
            .quiz-options {
                gap: 15px;
            }
        }

        .quiz-option {
            padding: 15px;
            font-size: clamp(0.9rem, 3vw, 1.1rem);
            text-align: left;
            background: #f8f9fa;
            border: 3px solid #e9ecef;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 500;
            line-height: 1.5;
            word-wrap: break-word;
            overflow-wrap: break-word;
            min-height: 56px;
            display: flex;
            align-items: center;
        }

        @media (min-width: 768px) {
            .quiz-option {
                padding: 20px;
                border-radius: 12px;
                line-height: 1.6;
            }
        }

        .quiz-option:hover, .quiz-option:active {
            background: #e9ecef;
            transform: translateX(5px);
        }

        .quiz-option.selected {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }

        .quiz-option.correct {
            background: #27ae60;
            color: white;
            border-color: #27ae60;
        }

        .quiz-option.incorrect {
            background: #e74c3c;
            color: white;
            border-color: #e74c3c;
        }

        .quiz-option:disabled {
            cursor: not-allowed;
            opacity: 0.7;
        }

        .quiz-feedback {
            margin-top: 15px;
            padding: 15px;
            border-radius: 10px;
            font-size: clamp(0.9rem, 3vw, 1rem);
            font-weight: bold;
            text-align: center;
        }

        @media (min-width: 768px) {
            .quiz-feedback {
                margin-top: 20px;
                padding: 20px;
                border-radius: 12px;
            }
        }

        .quiz-feedback.correct {
            background: #d4edda;
            color: #155724;
            border: 2px solid #c3e6cb;
        }

        .quiz-feedback.incorrect {
            background: #f8d7da;
            color: #721c24;
            border: 2px solid #f5c6cb;
        }

        .quiz-results {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }

        @media (min-width: 768px) {
            .quiz-results {
                padding: 40px;
                border-radius: 20px;
            }
        }

        .quiz-results h2 {
            color: #667eea;
            font-size: clamp(1.8rem, 5vw, 2.5rem);
            margin-bottom: 15px;
            text-align: center;
        }

        @media (min-width: 768px) {
            .quiz-results h2 {
                margin-bottom: 30px;
            }
        }

        .results-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        @media (min-width: 768px) {
            .results-grid {
                gap: 20px;
                margin-bottom: 30px;
            }
        }

        .result-card {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            border: 2px solid #e9ecef;
        }

        @media (min-width: 768px) {
            .result-card {
                padding: 20px;
                border-radius: 12px;
            }
        }

        .result-label {
            font-size: clamp(0.85rem, 2.5vw, 0.9rem);
            color: #7f8c8d;
            margin-bottom: 8px;
        }

        @media (min-width: 768px) {
            .result-label {
                margin-bottom: 10px;
            }
        }

        .result-value {
            font-size: clamp(1.8rem, 5vw, 2.5rem);
            font-weight: bold;
            color: #2c3e50;
        }

        .result-value.score {
            color: #667eea;
        }

        .result-value.correct {
            color: #27ae60;
        }

        .result-value.wrong {
            color: #e74c3c;
        }

        .result-value.skipped {
            color: #f39c12;
        }

        .percentage-circle {
            width: clamp(120px, 25vw, 150px);
            height: clamp(120px, 25vw, 150px);
            margin: 15px auto;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: clamp(2rem, 6vw, 3rem);
            font-weight: bold;
            color: white;
            box-shadow: 0 5px 20px rgba(0,0,0,0.2);
        }

        @media (min-width: 768px) {
            .percentage-circle {
                margin: 20px auto;
            }
        }

        .percentage-circle.excellent {
            background: linear-gradient(135deg, #27ae60, #43e97b);
        }

        .percentage-circle.good {
            background: linear-gradient(135deg, #3498db, #667eea);
        }

        .percentage-circle.average {
            background: linear-gradient(135deg, #f39c12, #ffc107);
        }

        .percentage-circle.poor {
            background: linear-gradient(135deg, #e74c3c, #f5576c);
        }

        /* Navigation Buttons */
        .nav-btn {
            width: clamp(50px, 12vw, 60px);
            height: clamp(50px, 12vw, 60px);
            background: white;
            border: none;
            border-radius: 50%;
            cursor: pointer;
            font-size: clamp(1.3rem, 4vw, 1.5rem);
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .nav-btn:hover, .nav-btn:active {
            transform: scale(1.1);
            box-shadow: 0 6px 20px rgba(0,0,0,0.3);
        }

        .nav-btn.prev {
            background: #3498db;
            color: white;
        }

        .nav-btn.next {
            background: #3498db;
            color: white;
        }

        /* Responsive adjustments */
        @media (max-width: 480px) {
            .card {
                min-height: 400px;
            }
            
            .word {
                font-size: 2rem;
            }
            
            .meaning {
                font-size: 0.95rem;
            }
            
            .btn {
                padding: 10px 15px;
                font-size: 0.9rem;
            }
            
            .remember-btn {
                width: 60px;
                height: 60px;
                font-size: 2rem;
            }
        }
        
        @media (min-width: 768px) {
            .card {
                min-height: 450px;
            }
            
            .word {
                font-size: 3rem;
            }
            
            .meaning {
                font-size: 1.2rem;
            }
            
            .btn {
                padding: 15px 30px;
                font-size: 1rem;
            }
            
            .remember-btn {
                width: 70px;
                height: 70px;
                font-size: 2.2rem;
            }
        }
        
        /* Landscape mode on mobile */
        @media (max-height: 600px) and (orientation: landscape) {
            .card {
                min-height: 260px !important;
            }
            
            .header {
                margin-bottom: 12px;
            }
            
            .header h1 {
                font-size: 1.4rem;
                margin-bottom: 4px;
            }
            
            .header p {
                font-size: 0.85rem;
            }
            
            .stats {
                margin-bottom: 12px;
                padding: 10px 15px;
            }
            
            .card-face {
                padding: 15px;
            }
            
            .word {
                font-size: 1.5rem;
                margin-bottom: 8px;
            }
            
            .meaning {
                font-size: 1rem;
                margin-bottom: 10px;
            }
            
            .remember-controls {
                margin: 12px auto;
                gap: 12px;
            }
        }
        
        /* Large screens */
        @media (min-width: 1024px) {
            .card {
                min-height: 450px;
            }
            
            .quiz-card {
                max-width: 800px;
            }
        }
        
        /* Touch-friendly improvements for touch devices */
        @media (hover: none) and (pointer: coarse) {
            .btn, .filter-btn, .quiz-option {
                min-height: 48px;
            }
            
            .remember-btn {
                min-width: 56px;
                min-height: 56px;
            }
            
            .nav-btn {
                width: 56px;
                height: 56px;
            }
            
            /* Larger tap targets for better touch experience */
            .nav-tab {
                min-height: 44px;
            }
        }
        
        /* Force quiz results to show when needed */
        #quiz-results[style*="display: block"] {
            display: block !important;
            visibility: visible !important;
            opacity: 1 !important;
        }
        
        #quiz-question[style*="display: none"] {
            display: none !important;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üìö SSC Vocabulary Flashcards</h1>
            <p>Enhanced with Progress Tracking</p>
        </div>

        <!-- Navigation Tabs (REMOVED History Tab) -->
        <div class="nav-tabs">
            <button class="nav-tab active" onclick="switchMode('all')">
                üìö All Cards
            </button>
            <button class="nav-tab" onclick="switchMode('not-remembered')" id="not-remembered-tab">
                ‚ö†Ô∏è Not Remembered <span class="count" id="not-remembered-count">0</span>
            </button>
            <button class="nav-tab" onclick="switchMode('remembered')" id="remembered-tab">
                ‚úÖ Remembered <span class="count" id="remembered-count">0</span>
            </button>
            <button class="nav-tab" onclick="switchMode('quiz')" id="quiz-tab">
                üéØ Quiz Mode
            </button>
        </div>

        <!-- Filters -->
        <div class="filters" id="filters-section">
            <div class="filter-section">
                <div class="filter-label">
                    <span>üìã</span>
                    <span>Filter by Exam:</span>
                </div>
                <div class="filter-options" id="exam-filters"></div>
            </div>

            <div class="filter-section">
                <div class="filter-label">
                    <span>üéØ</span>
                    <span>Filter by Type:</span>
                </div>
                <div class="filter-options" id="type-filters"></div>
            </div>

            <div class="filter-section">
                <button class="clear-filters" onclick="clearFilters()">‚úï Clear All Filters</button>
            </div>
        </div>

        <!-- Progress Bar -->
        <div class="progress-bar">
            <div class="progress-fill" id="progress-fill"></div>
        </div>

        <!-- Stats -->
        <div class="stats">
            <div class="stat-item">
                <div class="stat-value" id="total-cards">0</div>
                <div class="stat-label">Total Cards</div>
            </div>
            <div class="stat-item">
                <div class="stat-value" id="showing-cards">0</div>
                <div class="stat-label">Showing</div>
            </div>
            <div class="stat-item">
                <div class="stat-value" id="current-position">0</div>
                <div class="stat-label">Current</div>
            </div>
            <div class="stat-item">
                <div class="stat-value" style="color: #27ae60;" id="remembered-stat">0</div>
                <div class="stat-label">Remembered</div>
            </div>
        </div>

        <div id="card-display">
            <div class="flip-hint">
                üëÜ Tap/Click card to flip | üîÑ Use Flip button | üëá Swipe left/right to navigate
            </div>

            <div class="card-area">
                <div class="card-container" id="card-container">
                    <div class="card" id="card">
                        <div class="card-face card-front">
                            <div class="card-badges" id="badges-front">
                                <div>
                                    <span class="badge badge-exam" id="exam-badge-front"></span>
                                    <span class="badge badge-type" id="type-badge-front"></span>
                                </div>
                                <span class="badge badge-status" id="status-badge-front"></span>
                            </div>
                            <div class="word" id="word">Loading...</div>
                            <div class="hint">Click to see meaning</div>
                        </div>
                        <div class="card-face card-back">
                            <div class="card-badges" id="badges-back">
                                <div>
                                    <span class="badge badge-exam" id="exam-badge-back"></span>
                                    <span class="badge badge-type" id="type-badge-back"></span>
                                </div>
                                <span class="badge badge-status" id="status-badge-back"></span>
                            </div>
                            <div class="meaning-section">
                                <div class="meaning-title">Meaning</div>
                                <div class="meaning" id="meaning">...</div>
                                <div class="hindi" id="hindi">...</div>
                                <div class="synonym" id="synonym">...</div>
                                
                                <!-- 4 Options Display -->
                                <div class="options-display" id="options-display" style="display:none;">
                                    <div class="option-item" id="option-a">A) ...</div>
                                    <div class="option-item" id="option-b">B) ...</div>
                                    <div class="option-item" id="option-c">C) ...</div>
                                    <div class="option-item" id="option-d">D) ...</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Remember Controls Below Card -->
            <div class="remember-controls">
                <button class="remember-btn btn-not-remember" onclick="markCard('not-remembered')" title="Not Remembered (Keyboard: N)">
                    ‚ùå
                </button>
                <button class="remember-btn btn-remember" onclick="markCard('remembered')" title="Remembered (Keyboard: Y)">
                    ‚úÖ
                </button>
            </div>

            <div class="controls">
                <button class="btn btn-prev" onclick="previousCard()">‚Üê Previous</button>
                <button class="btn btn-flip" onclick="flipCard()">üîÑ Flip</button>
                <button class="btn btn-shuffle" onclick="shuffleCards()">üîÄ Shuffle</button>
                <button class="btn btn-next" onclick="nextCard()">Next ‚Üí</button>
            </div>
        </div>

        <!-- Quiz Mode Interface -->
        <div id="quiz-mode" class="hidden">
            <div class="quiz-setup" id="quiz-setup">
                <h2 style="color: white; text-align: center; margin-bottom: 30px;">üéØ Quiz Setup</h2>
                
                <div class="filters" style="margin-bottom: 30px;">
                    <div class="filter-section">
                        <div class="filter-label">
                            <span>üìã</span>
                            <span>Select Exam:</span>
                        </div>
                        <div class="filter-options" id="quiz-exam-filters"></div>
                    </div>

                    <div class="filter-section">
                        <div class="filter-label">
                            <span>üìù</span>
                            <span>Select Type:</span>
                        </div>
                        <div class="filter-options" id="quiz-type-filters"></div>
                    </div>
                </div>

                <div style="text-align: center; margin-top: 30px;">
                    <div style="background: rgba(255,255,255,0.95); border-radius: 15px; padding: 25px; margin-bottom: 25px; box-shadow: 0 5px 20px rgba(0,0,0,0.2);">
                        <div style="font-size: 1.1em; color: #666; margin-bottom: 10px;">Available Questions</div>
                        <div style="font-size: 3em; font-weight: bold; color: #667eea;" id="quiz-question-count">0</div>
                        <div style="font-size: 0.9em; color: #999; margin-top: 5px;" id="quiz-selection-hint">Select exam and type to see questions</div>
                    </div>
                    <button class="btn" id="start-quiz-btn" style="background: #43e97b; color: white; font-size: 1.3em; padding: 20px 50px;" onclick="startQuiz()" disabled>
                        üéØ Start Quiz
                    </button>
                </div>
            </div>

            <div class="quiz-question" id="quiz-question" style="display: none;">
                <div class="quiz-header">
                    <div class="quiz-progress">
                        Question <span id="quiz-current">1</span> of <span id="quiz-total">10</span>
                    </div>
                    <div class="quiz-score">
                        Score: <span id="quiz-score">0</span>/<span id="quiz-answered">0</span>
                    </div>
                </div>

                <div class="quiz-card">
                    <div class="quiz-word" id="quiz-word">Word</div>
                    <div class="quiz-hint" id="quiz-hint">Select the correct meaning</div>
                    
                    <div class="quiz-options" id="quiz-options">
                        <button class="quiz-option" onclick="selectAnswer(0)">Option A</button>
                        <button class="quiz-option" onclick="selectAnswer(1)">Option B</button>
                        <button class="quiz-option" onclick="selectAnswer(2)">Option C</button>
                        <button class="quiz-option" onclick="selectAnswer(3)">Option D</button>
                    </div>

                    <div class="quiz-feedback" id="quiz-feedback" style="display: none;"></div>
                </div>

                <div class="quiz-controls" style="display: flex; gap: 10px; justify-content: center; flex-wrap: wrap;">
                    <button class="btn" onclick="previousQuizQuestion()" id="quiz-prev-btn" style="background: #95a5a6; color: white;">
                        ‚Üê Previous
                    </button>
                    <button class="btn" onclick="skipQuestion()" id="quiz-skip-btn" style="background: #f39c12; color: white;">
                        ‚è≠Ô∏è Skip
                    </button>
                    <button class="btn" onclick="nextQuizQuestion()" id="quiz-next-btn" style="background: #3498db; color: white;">
                        Next ‚Üí
                    </button>
                    <button class="btn" onclick="submitQuiz()" id="quiz-submit-btn" style="background: #f5576c; color: white;">
                        ‚úÖ Submit Quiz
                    </button>
                </div>
            </div>

            <div class="quiz-results" id="quiz-results" style="display: none;">
                <div style="text-align: center;">
                    <h2>üéâ Quiz Completed!</h2>
                    
                    <div class="percentage-circle" id="percentage-circle">
                        <span id="percentage-value">0%</span>
                    </div>
                    
                    <div class="results-grid">
                        <div class="result-card">
                            <div class="result-label">Final Score</div>
                            <div class="result-value score" id="final-score">0/10</div>
                        </div>
                        <div class="result-card">
                            <div class="result-label">Correct</div>
                            <div class="result-value correct" id="correct-count">0</div>
                        </div>
                        <div class="result-card">
                            <div class="result-label">Wrong</div>
                            <div class="result-value wrong" id="wrong-count">0</div>
                        </div>
                        <div class="result-card">
                            <div class="result-label">Skipped</div>
                            <div class="result-value skipped" id="skipped-count">0</div>
                        </div>
                    </div>
                    
                    <!-- Detailed Question Review -->
                    <div id="quiz-review-section" style="margin: 30px 0; text-align: left;">
                        <h3 style="color: #667eea; text-align: center; margin-bottom: 20px; font-size: 1.5em;">üìä Detailed Analysis</h3>
                        <div id="quiz-review-list"></div>
                    </div>
                    
                    <button class="btn" style="background: #667eea; color: white; font-size: 1.2em; padding: 15px 40px;" onclick="restartQuiz()">
                        üîÑ Take Another Quiz
                    </button>
                    <button class="btn" style="background: #95a5a6; color: white; font-size: 1.2em; padding: 15px 40px; margin-left: 15px;" onclick="switchMode('all')">
                        üìö Back to Cards
                    </button>
                </div>
            </div>

            <!-- MOVED: Quiz History Section is now inside Quiz Mode -->
            <div id="history-section" class="quiz-history-section" style="margin-top: 40px;">
                <div class="quiz-history-header">
                    <h2>üìä Quiz History</h2>
                    <button class="clear-history-btn" onclick="clearQuizHistory()">üóëÔ∏è Clear History</button>
                </div>
                <div id="history-container">
                    <div class="no-history">
                        üìù No quiz attempts yet. Complete a quiz to see your history here!
                    </div>
                </div>
            </div>
        </div>

        <div id="no-results" class="no-results hidden">
            <p>üòï No flashcards match your current selection</p>
            <p style="font-size: 0.8em; margin-top: 15px; opacity: 0.8;">Try selecting different filters or switch to "All Cards"</p>
        </div>

        <!-- Loading Indicator -->
        <div id="loading-indicator" style="display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: white; padding: 30px; border-radius: 15px; box-shadow: 0 10px 40px rgba(0,0,0,0.3); text-align: center; z-index: 10000;">
            <div style="font-size: 3em; margin-bottom: 15px;">üìö</div>
            <div style="font-size: 1.2em; font-weight: bold; color: #667eea; margin-bottom: 10px;">Loading Vocabulary...</div>
            <div style="font-size: 0.9em; color: #7f8c8d;">Reading data from vocab.html</div>
        </div>
    </div>

    <script>
        // ==================== DATA LOADING ====================
        // Vocabulary data will be loaded dynamically from vocab.html
        let vocabData = {
            items: [],
            exams: {}
        };

        // Function to load vocabulary from vocab.html
        async function loadVocabularyFromHTML() {
            const response = await fetch('vocab.html');
            const htmlText = await response.text();
            
            const parser = new DOMParser();
            const doc = parser.parseFromString(htmlText, 'text/html');
            
            const items = [];
            const exams = {
                'cgl': { name: 'SSC CGL (Combined Graduate Level)', count: 0 },
                'chsl': { name: 'SSC CHSL (10+2 Level)', count: 0 },
                'mts': { name: 'SSC MTS (Multi Tasking Staff)', count: 0 },
                'cpo': { name: 'SSC CPO (Central Police Organisation)', count: 0 },
                'gd': { name: 'SSC GD (General Duty Constable)', count: 0 },
                'steno': { name: 'SSC Stenographer (Grade C & D)', count: 0 },
                'je': { name: 'SSC JE (Junior Engineer)', count: 0 },
                'common': { name: 'Common (All SSC Exams)', count: 0 }
            };
            
            const examSections = doc.querySelectorAll('.exam-section');
            
            examSections.forEach(section => {
                let exam_code = 'common';
                if (section.classList.contains('exam-cgl')) exam_code = 'cgl';
                else if (section.classList.contains('exam-chsl')) exam_code = 'chsl';
                else if (section.classList.contains('exam-mts')) exam_code = 'mts';
                else if (section.classList.contains('exam-cpo')) exam_code = 'cpo';
                else if (section.classList.contains('exam-gd')) exam_code = 'gd';
                else if (section.classList.contains('exam-steno')) exam_code = 'steno';
                else if (section.classList.contains('exam-je')) exam_code = 'je';
                
                const exam_name = exams[exam_code].name;
                const questions = section.querySelectorAll('.q');
                
                questions.forEach(q => {
                    const word = q.querySelector('.q-word')?.textContent.trim() || '';
                    const hindi = q.querySelector('.q-hindi')?.textContent.trim() || '';
                    const english = q.querySelector('.q-english')?.textContent.trim() || '';
                    const synonym = q.querySelector('.q-synonym')?.textContent.trim() || '';
                    const synonym_hindi = q.querySelector('.q-synonym-hindi')?.textContent.trim() || '';
                    
                    let type = 'vocabulary';
                    if (q.classList.contains('type-idiom')) type = 'idiom';
                    else if (q.classList.contains('type-phrase')) type = 'phrase';
                    else if (q.classList.contains('type-one-word')) type = 'one-word';
                    
                    // Get 4 options
                    const options = [];
                    for (let i = 1; i <= 4; i++) {
                        const optWord = q.querySelector(`.q-opt${i}`)?.textContent.trim() || '';
                        const optHindi = q.querySelector(`.q-opt${i}-hindi`)?.textContent.trim() || '';
                        if (optWord) {
                            options.push({
                                word: optWord,
                                hindi: optHindi
                            });
                        }
                    }
                    
                    if (word) {
                        items.push({
                            word,
                            hindi,
                            english,
                            synonym,
                            synonym_hindi,
                            exam: exam_code,
                            exam_name,
                            type,
                            options: options.length === 4 ? options : null,
                            id: `${exam_code}_${items.length}`
                        });
                        exams[exam_code].count++;
                    }
                });
            });
            
            return { items, exams };
        }

        // ==================== STATE MANAGEMENT ====================
        let currentCards = [];
        let currentIndex = 0;
        let isFlipped = false;
        let selectedExamFilters = new Set();
        let selectedTypeFilters = new Set();
        let currentMode = 'all';

        // Progress tracking
        let cardProgress = {};

        // Quiz state
        let quizCards = [];
        let quizCurrentIndex = 0;
        let quizAnswers = [];
        let quizScore = 0;
        let quizCorrectCount = 0;
        let quizWrongCount = 0;
        let quizSkippedCount = 0;
        let quizExamFilters = new Set();
        let quizTypeFilters = new Set();
        let quizInProgress = false;

        // Load progress from localStorage
        function loadProgress() {
            const saved = localStorage.getItem('ssc_card_progress');
            if (saved) {
                cardProgress = JSON.parse(saved);
            }
        }

        // Save progress to localStorage
        function saveProgress() {
            localStorage.setItem('ssc_card_progress', JSON.stringify(cardProgress));
        }

        // Mark card as remembered/not-remembered
        function markCard(status) {
            if (currentCards.length === 0) return;
            
            const card = currentCards[currentIndex];
            cardProgress[card.id] = {
                status: status,
                timestamp: new Date().toISOString()
            };
            
            saveProgress();
            updateStats();
            updateCurrentCard();
            
            // Show visual feedback
            const btn = status === 'remembered' ? 
                document.querySelector('.btn-remember') : 
                document.querySelector('.btn-not-remember');
            
            const originalBg = btn.style.background;
            btn.style.background = status === 'remembered' ? '#1e8449' : '#a93226';
            setTimeout(() => {
                btn.style.background = '';
            }, 200);
        }

        // ==================== CARD DISPLAY ====================
        function updateCurrentCard() {
            if (currentCards.length === 0) {
                document.getElementById('card-display').classList.add('hidden');
                document.getElementById('no-results').classList.remove('hidden');
                return;
            }
            
            document.getElementById('card-display').classList.remove('hidden');
            document.getElementById('no-results').classList.add('hidden');
            
            const card = currentCards[currentIndex];
            
            // Update badges
            const examText = card.exam_name || card.exam.toUpperCase();
            const typeText = card.type.replace('-', ' ').toUpperCase();
            
            document.getElementById('exam-badge-front').textContent = examText;
            document.getElementById('type-badge-front').textContent = typeText;
            document.getElementById('exam-badge-back').textContent = examText;
            document.getElementById('type-badge-back').textContent = typeText;
            
            // Update status badge
            const progress = cardProgress[card.id];
            const statusBadges = document.querySelectorAll('.badge-status');
            statusBadges.forEach(badge => {
                if (progress) {
                    badge.textContent = progress.status === 'remembered' ? '‚úÖ Remembered' : '‚ùå Not Remembered';
                    badge.className = 'badge badge-status ' + progress.status;
                } else {
                    badge.textContent = '‚è≥ Pending';
                    badge.className = 'badge badge-status';
                }
            });
            
            // Update word
            document.getElementById('word').textContent = card.word;
            
            // Update meaning (back)
            document.getElementById('meaning').textContent = card.english || 'No English meaning available';
            document.getElementById('hindi').textContent = card.hindi || 'No Hindi meaning available';
            
            // Update synonym
            const synonymText = card.synonym ? 
                `Synonym: ${card.synonym}${card.synonym_hindi ? ` (${card.synonym_hindi})` : ''}` : 
                'No synonym available';
            document.getElementById('synonym').textContent = synonymText;
            
            // Update 4 options display
            const optionsDisplay = document.getElementById('options-display');
            if (card.options && card.options.length === 4) {
                optionsDisplay.style.display = 'block';
                
                card.options.forEach((opt, idx) => {
                    const optionId = ['option-a', 'option-b', 'option-c', 'option-d'][idx];
                    const optionEl = document.getElementById(optionId);
                    const label = String.fromCharCode(65 + idx); // A, B, C, D
                    
                    if (opt.hindi) {
                        optionEl.innerHTML = `<strong>${label}) ${opt.word}</strong> <em>(${opt.hindi})</em>`;
                    } else {
                        optionEl.innerHTML = `<strong>${label}) ${opt.word}</strong>`;
                    }
                });
            } else {
                optionsDisplay.style.display = 'none';
            }
            
            // Update position indicator
            document.getElementById('current-position').textContent = currentIndex + 1;
            
            // Update progress bar
            const progressPercent = ((currentIndex + 1) / currentCards.length) * 100;
            document.getElementById('progress-fill').style.width = progressPercent + '%';
            
            // Reset flip state
            if (isFlipped) {
                flipCard();
            }
        }

        function flipCard() {
            const card = document.getElementById('card');
            card.classList.toggle('flipped');
            isFlipped = !isFlipped;
        }

        function nextCard() {
            if (currentCards.length === 0) return;
            currentIndex = (currentIndex + 1) % currentCards.length;
            updateCurrentCard();
        }

        function previousCard() {
            if (currentCards.length === 0) return;
            currentIndex = (currentIndex - 1 + currentCards.length) % currentCards.length;
            updateCurrentCard();
        }

        function shuffleCards() {
            if (currentCards.length === 0) return;
            
            // Fisher-Yates shuffle
            for (let i = currentCards.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [currentCards[i], currentCards[j]] = [currentCards[j], currentCards[i]];
            }
            
            currentIndex = 0;
            updateCurrentCard();
            
            // Visual feedback
            const shuffleBtn = document.querySelector('.btn-shuffle');
            shuffleBtn.textContent = '‚úÖ Shuffled!';
            setTimeout(() => {
                shuffleBtn.textContent = 'üîÄ Shuffle';
            }, 1000);
        }

        // ==================== FILTERING ====================
        function initializeFilters() {
            const examFilters = document.getElementById('exam-filters');
            const typeFilters = document.getElementById('type-filters');
            
            // Clear existing filters
            examFilters.innerHTML = '';
            typeFilters.innerHTML = '';
            
            // Add exam filters
            Object.entries(vocabData.exams).forEach(([code, exam]) => {
                if (exam.count > 0) {
                    const btn = document.createElement('button');
                    btn.className = 'filter-btn';
                    btn.textContent = `${exam.name} (${exam.count})`;
                    btn.onclick = () => toggleExamFilter(code);
                    btn.dataset.exam = code;
                    examFilters.appendChild(btn);
                }
            });
            
            // Add type filters
            const types = {
                'vocabulary': 'Vocabulary',
                'idiom': 'Idioms',
                'phrase': 'Phrases',
                'one-word': 'One Word Substitution'
            };
            
            Object.entries(types).forEach(([code, name]) => {
                const count = vocabData.items.filter(item => item.type === code).length;
                if (count > 0) {
                    const btn = document.createElement('button');
                    btn.className = 'filter-btn';
                    btn.textContent = `${name} (${count})`;
                    btn.onclick = () => toggleTypeFilter(code);
                    btn.dataset.type = code;
                    typeFilters.appendChild(btn);
                }
            });
        }

        function toggleExamFilter(exam) {
            if (selectedExamFilters.has(exam)) {
                selectedExamFilters.delete(exam);
            } else {
                selectedExamFilters.add(exam);
            }
            
            updateFilterButtons();
            filterCards();
        }

        function toggleTypeFilter(type) {
            if (selectedTypeFilters.has(type)) {
                selectedTypeFilters.delete(type);
            } else {
                selectedTypeFilters.add(type);
            }
            
            updateFilterButtons();
            filterCards();
        }

        function updateFilterButtons() {
            document.querySelectorAll('[data-exam]').forEach(btn => {
                const exam = btn.dataset.exam;
                btn.classList.toggle('active', selectedExamFilters.has(exam));
            });
            
            document.querySelectorAll('[data-type]').forEach(btn => {
                const type = btn.dataset.type;
                btn.classList.toggle('active', selectedTypeFilters.has(type));
            });
        }

        function clearFilters() {
            selectedExamFilters.clear();
            selectedTypeFilters.clear();
            updateFilterButtons();
            filterCards();
        }

        function filterCards() {
            let filtered = vocabData.items;
            
            // Apply mode filter
            if (currentMode === 'remembered') {
                filtered = filtered.filter(card => cardProgress[card.id]?.status === 'remembered');
            } else if (currentMode === 'not-remembered') {
                filtered = filtered.filter(card => cardProgress[card.id]?.status === 'not-remembered');
            }
            
            // Apply exam filter
            if (selectedExamFilters.size > 0) {
                filtered = filtered.filter(card => selectedExamFilters.has(card.exam));
            }
            
            // Apply type filter
            if (selectedTypeFilters.size > 0) {
                filtered = filtered.filter(card => selectedTypeFilters.has(card.type));
            }
            
            currentCards = filtered;
            currentIndex = 0;
            
            updateStats();
            updateCurrentCard();
        }

        function updateStats() {
            const remembered = vocabData.items.filter(card => cardProgress[card.id]?.status === 'remembered').length;
            const notRemembered = vocabData.items.filter(card => cardProgress[card.id]?.status === 'not-remembered').length;
            
            document.getElementById('total-cards').textContent = vocabData.items.length;
            document.getElementById('showing-cards').textContent = currentCards.length;
            document.getElementById('remembered-stat').textContent = remembered;
            
            document.getElementById('remembered-count').textContent = remembered;
            document.getElementById('not-remembered-count').textContent = notRemembered;
        }

        // ==================== MODE SWITCHING ====================
        function switchMode(mode) {
            currentMode = mode;
            
            // Update tab active state
            document.querySelectorAll('.nav-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            event.target.classList.add('active');
            
            // Show/hide appropriate sections
            if (mode === 'quiz') {
                document.getElementById('card-display').classList.add('hidden');
                document.getElementById('filters-section').classList.add('hidden');
                document.getElementById('quiz-mode').classList.remove('hidden');
                document.querySelector('.stats').classList.add('hidden');
                document.querySelector('.progress-bar').classList.add('hidden');
                initializeQuizFilters();
                loadQuizHistory(); // Load history when entering quiz mode
            } else {
                document.getElementById('card-display').classList.remove('hidden');
                document.getElementById('filters-section').classList.remove('hidden');
                document.getElementById('quiz-mode').classList.add('hidden');
                document.querySelector('.stats').classList.remove('hidden');
                document.querySelector('.progress-bar').classList.remove('hidden');
                filterCards();
            }
        }

        // ==================== KEYBOARD NAVIGATION ====================
        document.addEventListener('keydown', (e) => {
            if (currentMode === 'quiz') return; // Don't interfere with quiz mode
            
            switch(e.key) {
                case 'ArrowLeft':
                    previousCard();
                    break;
                case 'ArrowRight':
                    nextCard();
                    break;
                case ' ':
                case 'Enter':
                    e.preventDefault();
                    flipCard();
                    break;
                case 'y':
                case 'Y':
                    markCard('remembered');
                    break;
                case 'n':
                case 'N':
                    markCard('not-remembered');
                    break;
                case 's':
                case 'S':
                    shuffleCards();
                    break;
            }
        });

        // ==================== TOUCH SWIPE SUPPORT ====================
        let touchStartX = 0;
        let touchEndX = 0;
        let touchStartY = 0;
        let touchEndY = 0;

        const cardElement = document.getElementById('card');

        cardElement.addEventListener('touchstart', (e) => {
            touchStartX = e.changedTouches[0].screenX;
            touchStartY = e.changedTouches[0].screenY;
        });

        cardElement.addEventListener('touchend', (e) => {
            touchEndX = e.changedTouches[0].screenX;
            touchEndY = e.changedTouches[0].screenY;
            handleSwipe();
        });

        function handleSwipe() {
            const swipeThreshold = 50;
            const diffX = touchEndX - touchStartX;
            const diffY = touchEndY - touchStartY;
            
            // Check if horizontal swipe is more significant than vertical
            if (Math.abs(diffX) > Math.abs(diffY)) {
                if (diffX > swipeThreshold) {
                    // Swipe right - previous card
                    previousCard();
                } else if (diffX < -swipeThreshold) {
                    // Swipe left - next card
                    nextCard();
                }
            }
        }

        // Click to flip (but not when swiping)
        let clickStartX = 0;
        let clickStartY = 0;

        cardElement.addEventListener('mousedown', (e) => {
            clickStartX = e.clientX;
            clickStartY = e.clientY;
        });

        cardElement.addEventListener('click', (e) => {
            const diffX = Math.abs(e.clientX - clickStartX);
            const diffY = Math.abs(e.clientY - clickStartY);
            
            // Only flip if it's a true click (not a drag/swipe)
            if (diffX < 10 && diffY < 10) {
                flipCard();
            }
        });

        // ==================== QUIZ MODE ====================
        function initializeQuizFilters() {
            const examFilters = document.getElementById('quiz-exam-filters');
            const typeFilters = document.getElementById('quiz-type-filters');
            
            // Clear existing filters
            examFilters.innerHTML = '';
            typeFilters.innerHTML = '';
            
            // Add exam filters
            Object.entries(vocabData.exams).forEach(([code, exam]) => {
                if (exam.count > 0) {
                    const btn = document.createElement('button');
                    btn.className = 'filter-btn';
                    btn.textContent = `${exam.name} (${exam.count})`;
                    btn.onclick = () => toggleQuizExamFilter(code);
                    btn.dataset.exam = code;
                    examFilters.appendChild(btn);
                }
            });
            
            // Add type filters
            const types = {
                'vocabulary': 'Vocabulary',
                'idiom': 'Idioms',
                'phrase': 'Phrases',
                'one-word': 'One Word Substitution'
            };
            
            Object.entries(types).forEach(([code, name]) => {
                const count = vocabData.items.filter(item => item.type === code).length;
                if (count > 0) {
                    const btn = document.createElement('button');
                    btn.className = 'filter-btn';
                    btn.textContent = `${name} (${count})`;
                    btn.onclick = () => toggleQuizTypeFilter(code);
                    btn.dataset.type = code;
                    typeFilters.appendChild(btn);
                }
            });
            
            updateQuizQuestionCount();
        }

        function toggleQuizExamFilter(exam) {
            if (quizExamFilters.has(exam)) {
                quizExamFilters.delete(exam);
            } else {
                quizExamFilters.add(exam);
            }
            
            updateQuizFilterButtons();
            updateQuizQuestionCount();
        }

        function toggleQuizTypeFilter(type) {
            if (quizTypeFilters.has(type)) {
                quizTypeFilters.delete(type);
            } else {
                quizTypeFilters.add(type);
            }
            
            updateQuizFilterButtons();
            updateQuizQuestionCount();
        }

        function updateQuizFilterButtons() {
            document.querySelectorAll('#quiz-exam-filters [data-exam]').forEach(btn => {
                const exam = btn.dataset.exam;
                btn.classList.toggle('active', quizExamFilters.has(exam));
            });
            
            document.querySelectorAll('#quiz-type-filters [data-type]').forEach(btn => {
                const type = btn.dataset.type;
                btn.classList.toggle('active', quizTypeFilters.has(type));
            });
        }

        function updateQuizQuestionCount() {
            let filtered = vocabData.items.filter(card => card.options && card.options.length === 4);
            
            if (quizExamFilters.size > 0) {
                filtered = filtered.filter(card => quizExamFilters.has(card.exam));
            }
            
            if (quizTypeFilters.size > 0) {
                filtered = filtered.filter(card => quizTypeFilters.has(card.type));
            }
            
            const count = filtered.length;
            document.getElementById('quiz-question-count').textContent = count;
            
            const startBtn = document.getElementById('start-quiz-btn');
            const hint = document.getElementById('quiz-selection-hint');
            
            if (count === 0) {
                startBtn.disabled = true;
                hint.textContent = 'Select exam and type to see questions';
            } else {
                startBtn.disabled = false;
                hint.textContent = `Ready to start with ${count} questions`;
            }
        }

        function startQuiz() {
            // Get filtered cards with 4 options
            let filtered = vocabData.items.filter(card => card.options && card.options.length === 4);
            
            if (quizExamFilters.size > 0) {
                filtered = filtered.filter(card => quizExamFilters.has(card.exam));
            }
            
            if (quizTypeFilters.size > 0) {
                filtered = filtered.filter(card => quizTypeFilters.has(card.type));
            }
            
            if (filtered.length === 0) {
                alert('No questions available with the selected filters. Please select different options.');
                return;
            }
            
            // Shuffle and select questions
            quizCards = [...filtered].sort(() => Math.random() - 0.5);
            quizCurrentIndex = 0;
            quizAnswers = new Array(quizCards.length).fill(null);
            quizScore = 0;
            quizCorrectCount = 0;
            quizWrongCount = 0;
            quizSkippedCount = 0;
            quizInProgress = true;
            
            // Hide setup, show question
            document.getElementById('quiz-setup').style.display = 'none';
            document.getElementById('quiz-question').style.display = 'block';
            document.getElementById('quiz-results').style.display = 'none';
            
            updateQuizQuestion();
        }

        function updateQuizQuestion() {
            if (quizCurrentIndex >= quizCards.length) {
                submitQuiz();
                return;
            }
            
            const card = quizCards[quizCurrentIndex];
            
            // Update header
            document.getElementById('quiz-current').textContent = quizCurrentIndex + 1;
            document.getElementById('quiz-total').textContent = quizCards.length;
            
            // Calculate score (only from answered questions)
            const answeredCount = quizAnswers.filter(a => a !== null).length;
            document.getElementById('quiz-answered').textContent = answeredCount;
            document.getElementById('quiz-score').textContent = quizScore.toFixed(1);
            
            // Update word and hint
            document.getElementById('quiz-word').textContent = card.word;
            const hintText = card.hindi ? `${card.hindi}` : (card.english ? `${card.english}` : 'Select the correct synonym');
            document.getElementById('quiz-hint').textContent = hintText;
            
            // Shuffle options for this question
            const shuffledOptions = [...card.options].sort(() => Math.random() - 0.5);
            
            // Update options
            const optionButtons = document.querySelectorAll('.quiz-option');
            shuffledOptions.forEach((opt, idx) => {
                const btn = optionButtons[idx];
                if (opt.hindi) {
                    btn.textContent = `${opt.word} (${opt.hindi})`;
                } else {
                    btn.textContent = opt.word;
                }
                btn.dataset.option = JSON.stringify(opt);
                btn.disabled = false;
                btn.className = 'quiz-option';
                
                // Restore previous selection if any
                const prevAnswer = quizAnswers[quizCurrentIndex];
                if (prevAnswer && prevAnswer.selectedOption.word === opt.word) {
                    btn.classList.add('selected');
                }
            });
            
            // Hide feedback
            document.getElementById('quiz-feedback').style.display = 'none';
            
            // Update button states
            document.getElementById('quiz-prev-btn').disabled = quizCurrentIndex === 0;
            document.getElementById('quiz-skip-btn').disabled = false;
            
            // Show/hide submit button
            if (quizCurrentIndex === quizCards.length - 1) {
                document.getElementById('quiz-next-btn').style.display = 'none';
                document.getElementById('quiz-submit-btn').style.display = 'inline-block';
            } else {
                document.getElementById('quiz-next-btn').style.display = 'inline-block';
                document.getElementById('quiz-submit-btn').style.display = 'none';
            }
        }

        function selectAnswer(optionIndex) {
            const card = quizCards[quizCurrentIndex];
            const selectedButton = document.querySelectorAll('.quiz-option')[optionIndex];
            const selectedOption = JSON.parse(selectedButton.dataset.option);
            
            const isCorrect = selectedOption.word === card.synonym;
            
            // Disable all options
            document.querySelectorAll('.quiz-option').forEach(btn => {
                btn.disabled = true;
                btn.classList.remove('selected');
                
                const opt = JSON.parse(btn.dataset.option);
                if (opt.word === card.synonym) {
                    btn.classList.add('correct');
                }
            });
            
            // Mark selected option
            if (isCorrect) {
                selectedButton.classList.add('correct');
            } else {
                selectedButton.classList.add('incorrect');
            }
            
            // Update score (remove old score if re-answering)
            const previousAnswer = quizAnswers[quizCurrentIndex];
            if (previousAnswer && previousAnswer.correct && !previousAnswer.skipped) {
                quizScore -= 1;
                quizCorrectCount -= 1;
            } else if (previousAnswer && !previousAnswer.correct && !previousAnswer.skipped) {
                quizWrongCount -= 1;
            } else if (previousAnswer && previousAnswer.skipped) {
                quizSkippedCount -= 1;
            }
            
            if (isCorrect) {
                quizScore += 1;
                quizCorrectCount += 1;
            } else {
                quizWrongCount += 1;
            }
            
            // Save answer
            quizAnswers[quizCurrentIndex] = {
                questionIndex: quizCurrentIndex,
                selectedOption,
                correct: isCorrect,
                skipped: false
            };
            
            // Show feedback
            const feedback = document.getElementById('quiz-feedback');
            if (isCorrect) {
                feedback.className = 'quiz-feedback correct';
                feedback.textContent = '‚úÖ Correct! Well done!';
            } else {
                feedback.className = 'quiz-feedback incorrect';
                const correctAns = card.synonym + (card.synonym_hindi ? ` (${card.synonym_hindi})` : '');
                feedback.textContent = `‚ùå Wrong! The correct answer is: ${correctAns}`;
            }
            feedback.style.display = 'block';
            
            // Update score display
            const answeredCount = quizAnswers.filter(a => a !== null).length;
            document.getElementById('quiz-answered').textContent = answeredCount;
            document.getElementById('quiz-score').textContent = quizScore.toFixed(1);
            
            // Auto-advance after 2 seconds
            setTimeout(() => {
                if (quizCurrentIndex < quizCards.length - 1) {
                    nextQuizQuestion();
                }
            }, 2000);
        }

        function skipQuestion() {
            const previousAnswer = quizAnswers[quizCurrentIndex];
            
            // Update counters if changing from answered to skipped
            if (previousAnswer && previousAnswer.correct && !previousAnswer.skipped) {
                quizScore -= 1;
                quizCorrectCount -= 1;
                quizSkippedCount += 1;
            } else if (previousAnswer && !previousAnswer.correct && !previousAnswer.skipped) {
                quizWrongCount -= 1;
                quizSkippedCount += 1;
            } else if (!previousAnswer) {
                quizSkippedCount += 1;
            }
            
            quizAnswers[quizCurrentIndex] = {
                questionIndex: quizCurrentIndex,
                selectedOption: null,
                correct: false,
                skipped: true
            };
            
            nextQuizQuestion();
        }

        function nextQuizQuestion() {
            quizCurrentIndex++;
            updateQuizQuestion();
        }

        function previousQuizQuestion() {
            if (quizCurrentIndex > 0) {
                quizCurrentIndex--;
                updateQuizQuestion();
            }
        }

        function submitQuiz() {
            // Calculate final results
            const totalQuestions = quizCards.length;
            const percentage = Math.round((quizCorrectCount / totalQuestions) * 100);
            
            // Update results display
            document.getElementById('percentage-value').textContent = percentage + '%';
            document.getElementById('final-score').textContent = `${quizScore.toFixed(1)}/${totalQuestions}`;
            document.getElementById('correct-count').textContent = quizCorrectCount;
            document.getElementById('wrong-count').textContent = quizWrongCount;
            document.getElementById('skipped-count').textContent = quizSkippedCount;
            
            // Update percentage circle color
            const circle = document.getElementById('percentage-circle');
            circle.className = 'percentage-circle';
            if (percentage >= 80) circle.classList.add('excellent');
            else if (percentage >= 60) circle.classList.add('good');
            else if (percentage >= 40) circle.classList.add('average');
            else circle.classList.add('poor');
            
            // Generate detailed review
            generateQuizReview();
            
            // Show results, hide question
            document.getElementById('quiz-question').style.display = 'none';
            document.getElementById('quiz-results').style.display = 'block';
            
            // Save to history
            saveQuizToHistory();
            
            quizInProgress = false;
        }

        function generateQuizReview() {
            const reviewList = document.getElementById('quiz-review-list');
            
            const reviewHTML = quizCards.map((card, index) => {
                const answer = quizAnswers[index];
                const questionNum = index + 1;
                
                let statusIcon, statusText, statusColor, bgColor, userAnswerText;
                
                if (!answer || answer.skipped) {
                    statusIcon = '‚è≠Ô∏è';
                    statusText = 'Skipped';
                    statusColor = '#f39c12';
                    bgColor = '#fff3cd';
                    userAnswerText = '<em style="color: #856404;">Not answered</em>';
                } else if (answer.correct) {
                    statusIcon = '‚úÖ';
                    statusText = 'Correct';
                    statusColor = '#27ae60';
                    bgColor = '#d4edda';
                    const opt = answer.selectedOption;
                    userAnswerText = opt.word + (opt.hindi ? ` (${opt.hindi})` : '');
                } else {
                    statusIcon = '‚ùå';
                    statusText = 'Wrong';
                    statusColor = '#e74c3c';
                    bgColor = '#f8d7da';
                    const opt = answer.selectedOption;
                    userAnswerText = opt.word + (opt.hindi ? ` (${opt.hindi})` : '');
                }
                
                const correctAnswer = card.synonym + (card.synonym_hindi ? ` (${card.synonym_hindi})` : '');
                
                return `
                    <div style="background: ${bgColor}; border-left: 5px solid ${statusColor}; padding: 12px; margin-bottom: 10px; border-radius: 6px; font-size: 0.9em;">
                        <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 8px;">
                            <div style="flex: 1;">
                                <div style="font-weight: bold; color: #333;">
                                    Q${questionNum}. ${card.word}
                                </div>
                                ${card.hindi || card.english ? `<div style="color: #666; font-size: 0.85em; margin-top: 3px;">${card.hindi || ''} ${card.english ? '‚Ä¢ ' + card.english : ''}</div>` : ''}
                            </div>
                            <div style="background: white; padding: 5px 10px; border-radius: 15px; font-weight: bold; color: ${statusColor}; font-size: 0.85em; white-space: nowrap; margin-left: 10px;">
                                ${statusIcon} ${statusText}
                            </div>
                        </div>
                        
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px; margin-top: 8px;">
                            <div style="background: white; padding: 8px; border-radius: 4px;">
                                <div style="font-size: 0.8em; color: #666; margin-bottom: 2px;">Your Answer:</div>
                                <div style="font-weight: bold; color: ${answer && answer.correct ? '#27ae60' : (answer && answer.skipped ? '#856404' : '#e74c3c')}; font-size: 0.9em;">
                                    ${userAnswerText}
                                </div>
                            </div>
                            <div style="background: white; padding: 8px; border-radius: 4px;">
                                <div style="font-size: 0.8em; color: #666; margin-bottom: 2px;">Correct Answer:</div>
                                <div style="font-weight: bold; color: #27ae60; font-size: 0.9em;">
                                    ${correctAnswer}
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            }).join('');
            
            reviewList.innerHTML = reviewHTML;
        }

        function saveQuizToHistory() {
            const history = JSON.parse(localStorage.getItem('ssc_quiz_history') || '[]');
            
            // Get exam names
            const examNames = Array.from(quizExamFilters).map(code => 
                vocabData.exams[code].name.split('(')[0].trim()
            ).join(', ') || 'All Exams';
            
            // Get type names
            const typeNames = {
                'vocabulary': 'Vocabulary',
                'idiom': 'Idioms',
                'phrase': 'Phrases',
                'one-word': 'One Word'
            };
            const typeNamesStr = Array.from(quizTypeFilters).map(code => typeNames[code]).join(', ') || 'All Types';
            
            // Prepare detailed answers with card data
            const detailedAnswers = quizAnswers.map((answer, index) => {
                const card = quizCards[index];
                
                let userAnswerText = 'Not answered';
                if (answer && !answer.skipped) {
                    const userOption = answer.selectedOption;
                    userAnswerText = userOption ? 
                        (userOption.word + (userOption.hindi ? ` ‚Äì ${userOption.hindi}` : '')) : 
                        'Unknown';
                }
                
                const correctAnswerText = card.synonym + (card.synonym_hindi ? ` ‚Äì ${card.synonym_hindi}` : '');
                
                return {
                    ...answer,
                    card: {
                        word: card.word,
                        hindi: card.hindi,
                        english: card.english,
                        type: card.type,
                        correctAnswer: card.synonym
                    },
                    userAnswerText: userAnswerText,
                    correctAnswerText: correctAnswerText
                };
            });
            
            const quizResult = {
                date: new Date().toISOString(),
                totalQuestions: quizCards.length,
                score: quizScore,
                correct: quizCorrectCount,
                wrong: quizWrongCount,
                skipped: quizSkippedCount,
                percentage: Math.round((quizCorrectCount / quizCards.length) * 100),
                exams: examNames,
                types: typeNamesStr,
                answers: detailedAnswers
            };
            
            history.unshift(quizResult); // Add to beginning
            
            // Keep only last 50 attempts
            if (history.length > 50) {
                history.pop();
            }
            
            localStorage.setItem('ssc_quiz_history', JSON.stringify(history));
        }

        function loadQuizHistory() {
            const history = JSON.parse(localStorage.getItem('ssc_quiz_history') || '[]');
            const container = document.getElementById('history-container');
            
            if (history.length === 0) {
                container.innerHTML = '<div class="no-history">üìù No quiz attempts yet. Complete a quiz to see your history here!</div>';
                return;
            }
            
            container.innerHTML = history.map((result, index) => {
                const date = new Date(result.date);
                const dateStr = date.toLocaleDateString() + ' ' + date.toLocaleTimeString();
                
                // Generate detailed review HTML for this quiz
                let reviewHTML = '';
                if (result.answers && result.answers.length > 0) {
                    reviewHTML = result.answers.map((answer, qIndex) => {
                        const card = answer.card || {}; // Card data stored with answer
                        const questionNum = qIndex + 1;
                        
                        let statusIcon, statusText, statusColor, bgColor, userAnswerText;
                        
                        if (answer.skipped) {
                            statusIcon = '‚è≠Ô∏è';
                            statusText = 'Skipped';
                            statusColor = '#f39c12';
                            bgColor = '#fff3cd';
                            userAnswerText = '<em style="color: #856404;">Not answered</em>';
                        } else if (answer.correct) {
                            statusIcon = '‚úÖ';
                            statusText = 'Correct';
                            statusColor = '#27ae60';
                            bgColor = '#d4edda';
                            userAnswerText = answer.userAnswerText || 'Correct';
                        } else {
                            statusIcon = '‚ùå';
                            statusText = 'Wrong';
                            statusColor = '#e74c3c';
                            bgColor = '#f8d7da';
                            userAnswerText = answer.userAnswerText || 'Wrong';
                        }
                        
                        return `
                            <div style="background: ${bgColor}; border-left: 5px solid ${statusColor}; padding: 12px; margin-bottom: 10px; border-radius: 6px; font-size: 0.9em;">
                                <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 8px;">
                                    <div style="flex: 1;">
                                        <div style="font-weight: bold; color: #333;">
                                            Q${questionNum}. ${card.word || 'Question ' + questionNum}
                                        </div>
                                        ${card.hindi || card.english ? `<div style="color: #666; font-size: 0.85em; margin-top: 3px;">${card.hindi || ''} ${card.english ? '‚Ä¢ ' + card.english : ''}</div>` : ''}
                                    </div>
                                    <div style="background: white; padding: 5px 10px; border-radius: 15px; font-weight: bold; color: ${statusColor}; font-size: 0.85em; white-space: nowrap; margin-left: 10px;">
                                        ${statusIcon} ${statusText}
                                    </div>
                                </div>
                                
                                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px; margin-top: 8px;">
                                    <div style="background: white; padding: 8px; border-radius: 4px;">
                                        <div style="font-size: 0.8em; color: #666; margin-bottom: 2px;">Your Answer:</div>
                                        <div style="font-weight: bold; color: ${answer.correct ? '#27ae60' : (answer.skipped ? '#856404' : '#e74c3c')}; font-size: 0.9em;">
                                            ${userAnswerText}
                                        </div>
                                    </div>
                                    <div style="background: white; padding: 8px; border-radius: 4px;">
                                        <div style="font-size: 0.8em; color: #666; margin-bottom: 2px;">Correct Answer:</div>
                                        <div style="font-weight: bold; color: #27ae60; font-size: 0.9em;">
                                            ${answer.correctAnswerText || card.correctAnswer || 'N/A'}
                                        </div>
                                    </div>
                                </div>
                            </div>
                        `;
                    }).join('');
                }
                
                return `
                    <div class="history-item">
                        <div class="history-header">
                            <div>
                                <div style="font-weight: bold; font-size: 1.1em; color: #667eea;">${result.exams}</div>
                                <div style="font-size: 0.9em; color: #7f8c8d; margin-top: 5px;">${result.types}</div>
                            </div>
                            <div class="history-score">${result.score.toFixed(1)}</div>
                        </div>
                        <div class="history-date">üìÖ ${dateStr}</div>
                        <div class="history-details">
                            <div class="history-stat">
                                <div class="history-stat-value stat-correct">${result.correct}</div>
                                <div class="history-stat-label">Correct</div>
                            </div>
                            <div class="history-stat">
                                <div class="history-stat-value stat-wrong">${result.wrong}</div>
                                <div class="history-stat-label">Wrong</div>
                            </div>
                            <div class="history-stat">
                                <div class="history-stat-value stat-skipped">${result.skipped}</div>
                                <div class="history-stat-label">Skipped</div>
                            </div>
                            <div class="history-stat">
                                <div class="history-stat-value" style="color: #667eea;">${result.percentage}%</div>
                                <div class="history-stat-label">Accuracy</div>
                            </div>
                            <div class="history-stat">
                                <div class="history-stat-value" style="color: #2c3e50;">${result.totalQuestions}</div>
                                <div class="history-stat-label">Questions</div>
                            </div>
                        </div>
                        ${reviewHTML ? `
                            <button class="btn" onclick="toggleHistoryDetails(${index})" 
                                    style="background: #667eea; color: white; padding: 10px 20px; margin-top: 15px; font-size: 0.9em; width: 100%;">
                                üìä View Detailed Analysis
                            </button>
                            <div id="history-details-${index}" style="display: none; margin-top: 15px; max-height: 500px; overflow-y: auto;">
                                <h4 style="color: #667eea; margin-bottom: 15px;">Question by Question Review</h4>
                                ${reviewHTML}
                            </div>
                        ` : ''}
                    </div>
                `;
            }).join('');
        }
        
        function toggleHistoryDetails(index) {
            const detailsDiv = document.getElementById(`history-details-${index}`);
            const button = event.target;
            
            if (detailsDiv.style.display === 'none') {
                detailsDiv.style.display = 'block';
                button.textContent = 'üîº Hide Detailed Analysis';
            } else {
                detailsDiv.style.display = 'none';
                button.textContent = 'üìä View Detailed Analysis';
            }
        }

        function clearQuizHistory() {
            if (!confirm('Are you sure you want to clear all quiz history? This cannot be undone.')) {
                return;
            }
            
            localStorage.removeItem('ssc_quiz_history');
            loadQuizHistory();
        }

        function restartQuiz() {
            quizExamFilters.clear();
            quizTypeFilters.clear();
            quizInProgress = false;
            document.getElementById('quiz-results').style.display = 'none';
            document.getElementById('quiz-setup').style.display = 'block';
            initializeQuizFilters();
        }


        // Initialize
        loadProgress(); // Load saved progress from localStorage
        
        // Load vocabulary data when page loads
        document.getElementById('loading-indicator').style.display = 'block';
        
        loadVocabularyFromHTML().then(data => {
            vocabData = data;
            document.getElementById('loading-indicator').style.display = 'none';
            initializeFilters();
            filterCards();
        }).catch(error => {
            console.error('Error loading vocabulary:', error);
            document.getElementById('loading-indicator').style.display = 'none';
            alert('Error loading vocabulary data. Please check that vocab.html is in the same directory.');
        });
    </script>
</body>
</html>
